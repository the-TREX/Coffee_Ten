{% load static %}
<body class="font-Dana bg-[#f3f4f6] text-zinc-900 dark:bg-zinc-900 dark:text-white overflow-x-hidden transition-all">

<!-- آیکون‌های SVG -->
<svg class="hidden">
    <!-- تمام آیکون‌های قبلی -->
    <symbol id="arrow-down-circle" viewBox="0 0 24 24" stroke-width="1.5">
        <path stroke-linecap="round" stroke-linejoin="round"
              d="m9 12.75 3 3m0 0 3-3m-3 3v-7.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"/>
    </symbol>

</svg>

<!-- نوار ناوبری اصلی -->
<header class="sticky top-0 z-40">
    <!-- نوار ناوبری دسکتاپ -->
    <nav class="w-full hidden md:flex shadow py-5 bg-white dark:bg-zinc-700">
        <div class="container flex items-center justify-between">
            <!-- لوگو -->
            <a href="{% url 'home:main' %}"
               class="flex items-center gap-x-1 dark:text-brown-300 text-brown-600 font-MorabbaMedium text-xl lg:text-3xl">
                <img src="{% static 'images/logo.png' %}" alt="Coffee Ten Logo" class="w-6 h-6"/>
                <h1>کافی تِن</h1>
            </a>

            <!-- منوی اصلی -->
            <ul class="mt-2 flex items-center gap-x-4 lg:gap-x-10 font-DanaMedium lg:mr-30 xl:mr-32 child:z-30">
                <li class="nav-item {% if request.resolver_match.url_name == 'main' %} text-green-500{% endif %}">
                    <a href="{% url 'home:main' %}">صفحه اصلی</a>
                </li>

                <!-- آیتم فروشگاه -->
                <li class="nav-item {% if request.resolver_match.url_name == 'shop' %} text-green-500{% endif %}">
                    <div class="flex items-center flex-row gap-x-1">
                        <a href="{% url 'products:shop' %}">فروشگاه</a>
                    </div>
                </li>


                <li class="nav-item {% if request.resolver_match.url_name == 'contact_us' %} text-green-500{% endif %}">
                    <a href="{% url 'account:contact_us' %}">تماس با ما</a>
                </li>
                <li class="nav-item {% if request.resolver_match.url_name == 'about' %} text-green-500{% endif %}">
                    <a href="{% url 'products:about' %}">درباره ما</a>
                </li>
            </ul>

            <!-- دکمه‌های اقدام -->
            <div class="flex items-center gap-x-3 child:z-30">
                <!-- دکمه تغییر تم -->
                <button class="toggle-theme">
                    <svg class="inline-block dark:hidden w-6 h-6">
                        <use href="#moon"/>
                    </svg>
                    <svg class="hidden dark:inline w-6 h-6">
                        <use href="#sun"/>
                    </svg>
                </button>
                <!-- بخش حساب کاربری -->
                {% if request.user.is_authenticated %}
                    <button class="group relative px-2 lg:px-3 py-2 flex items-center justify-end gap-x-1 text-white transition-colors bg-green-500 hover:bg-green-600 rounded-lg">
                        <svg class="h-5 w-5 hidden lg:flex">
                            <use href="#user"></use>
                        </svg>
                        <a href="##"> حساب کاربری</a>
                        <!-- زیرمنو -->
                        <div class="absolute dark:border-none border border-gray-100 w-52 p-4 bg-white text-zinc-900 dark:text-white flex flex-col gap-y-3 opacity-0 invisible group-hover:opacity-100 group-hover:visible group-hover:top-12 transition-all delay-100 dark:bg-zinc-800 top-20 rounded text-base shadow child:transition-all child:py-1 child:px-2">
                            <a href="##"
                               class="flex items-center gap-x-3 w-full hover:bg-green-500/20 hover:text-green-500 rounded">
                                <svg class="h-5 w-5">
                                    <use href="#user"></use>
                                </svg>
                                سفارشات من
                            </a>
                            <a href="##"
                               class="flex items-center gap-x-3 w-full hover:bg-green-500/20 hover:text-green-500 rounded">
                                <svg class="h-5 w-5">
                                    <use href="#envelope"></use>
                                </svg>
                                لیست پیام ها
                            </a>
                            <a href="{% url 'account:edit_profile' %}"
                               class="flex items-center gap-x-3 w-full hover:bg-green-500/20 hover:text-green-500 rounded">
                                <svg class="h-5 w-5">
                                    <use href="#cog"></use>
                                </svg>
                                ویرایش کاربری
                            </a>
                            <!-- جداکننده -->
                            <span class="border-t dark:border-gray-100/20 border-gray-100-gray-100"></span>
                            <a href="{% url 'account:logout' %}"
                               class="flex items-center gap-x-3 w-full hover:bg-red-400/20 dark:hover:bg-rose-500/20 rounded hover:text-rose-400">
                                <svg class="h-5 w-5">
                                    <use href="#arrow-left-start-on-rectangle"></use>
                                </svg>
                                خروج از حساب
                            </a>
                        </div>
                    </button>
                {% else %}
                    <!-- دکمه ورود برای کاربران غیرعضو -->
                    <a href="{% url 'account:login' %}"
                       class="px-2 lg:px-3 py-2 flex items-center justify-end gap-x-1 text-white transition-colors bg-green-500 hover:bg-green-600 rounded-lg">
                        <svg class="h-5 w-5 rotate-180">
                            <use href="#arrow-left-start-on-rectangle"></use>
                        </svg>
                        ورود | ثبت نام
                    </a>
                {% endif %}
            </div>
        </div>
    </nav>

    <!-- نوار ناوبری موبایل -->
    <nav class="md:hidden dark:bg-zinc-800 bg-white flex justify-between items-center h-16 shadow-md py-5 px-4">
        <div>
            <svg class="w-6 h-6 mobile-menu__open-icon cursor-pointer">
                <use href="#bars"></use>
            </svg>
        </div>

        <a href="#" class="flex items-center gap-x-1 dark:text-brown-300 text-brown-600 font-MorabbaMedium text-xl">
            <img src="{% static 'images/logo.png' %}" alt="Coffee Ten Logo" class="w-6 h-6"/>
            <h1>CoFFee Ten</h1>
        </a>

        <button class="open-shopping-cart__btn relative">
            <svg class="w-6 h-6">
                <use href="#shopping-cart"/>
            </svg>
            <span class="absolute -top-2 -right-2 w-4 h-4 text-[10px] flex items-center justify-center bg-red-500 text-white rounded-full">2</span>
        </button>
    </nav>

    <!-- منوی موبایل (سایدبار) -->
    <div class="mobile-menu fixed -right-64 top-0 bottom-0 w-64 bg-white dark:bg-zinc-700 z-50 shadow transition-all duration-300 px-4 hidden">
        <!-- هدر -->
        <div class="mt-3 flex items-center justify-between">
            <a href="#" class="flex items-center gap-x-1 dark:text-brown-300 text-brown-600 font-MorabbaMedium text-xl">
                <img src="{% static 'images/logo.png' %}" alt="Coffee Ten Logo" class="w-6 h-6"/>
                <h1>CoFFee Ten</h1>
            </a>
            <svg class="mobile-menu__close-icon w-6 h-6 cursor-pointer">
                <use href="#close"></use>
            </svg>
        </div>

        <!-- جداکننده -->
        <span class="flex w-full border-t dark:border-white/10 border-gray-200 my-5"></span>

        <!-- نوار جستجو -->
        <form action="#" method="get" class="mb-3">
            <input type="text" name="q" placeholder="جستجو..."
                   class="dark:bg-zinc-600 dark:text-white bg-gray-200 text-zinc-900 rounded w-full pr-4 py-1.5"/>
        </form>

        <!-- منوی موبایل -->
        <ul class="flex flex-col gap-y-6 text-zinc-700 dark:text-white">
            <li>
                <a href="{% url 'home:main' %}" class="flex items-center gap-x-2">
                    <svg class="w-5 h-5">
                        <use href="#home"></use>
                    </svg>
                    صفحه اصلی
                </a>
            </li>

            <li class="">
                <div class="flex items-center justify-between">
                    <a href="#" class="flex items-center gap-x-2">
                        <svg class="w-5 h-5">
                            <use href="#shopping-bag"></use>
                        </svg>
                        فروشگاه
                    </a>
                </div>
            </li>


            <li>
                <a href="#" class="flex items-center gap-x-2">
                    <svg class="w-5 h-5">
                        <use href="#phone"></use>
                    </svg>
                    تماس با ما
                </a>
            </li>

            <li>
                <a href="#" class="flex items-center gap-x-2">
                    <svg class="w-5 h-5">
                        <use href="#map"></use>
                    </svg>
                    درباره ما
                </a>
            </li>

            <!-- بخش حساب کاربری -->
            {% if user.is_authenticated %}
                <li class="mt-4">
                    <a href="#" class="flex items-center gap-x-2 text-green-500">
                        <svg class="w-5 h-5">
                            <use href="#user"></use>
                        </svg>
                        حساب کاربری
                    </a>
                    <!-- زیرمنوی حساب کاربری -->
                    <ul class="flex flex-col gap-y-3 pr-8 mt-3 text-sm">
                        <li><a href="#" class="flex items-center gap-x-2">
                            <svg class="w-4 h-4">
                                <use href="#shopping-bag"></use>
                            </svg>
                            سفارشات من
                        </a></li>
                        <li><a href="#" class="flex items-center gap-x-2">
                            <svg class="w-4 h-4">
                                <use href="#envelope"></use>
                            </svg>
                            پیام‌ها
                        </a></li>
                        <li><a href="#" class="flex items-center gap-x-2">
                            <svg class="w-4 h-4">
                                <use href="#cog"></use>
                            </svg>
                            تنظیمات حساب
                        </a></li>
                        <li class="mt-2">
                            <a href="{% url 'account:logout' %}" class="flex items-center gap-x-2 text-rose-500">
                                <svg class="w-4 h-4">
                                    <use href="#arrow-left-start-on-rectangle"></use>
                                </svg>
                                خروج از حساب
                            </a>
                        </li>
                    </ul>
                </li>
            {% else %}
                <li class="mt-4">
                    <a href="{% url 'account:login' %}" class="flex items-center gap-x-2 text-green-500">
                        <svg class="w-5 h-5 rotate-180">
                            <use href="#arrow-left-start-on-rectangle"></use>
                        </svg>
                        ورود / ثبت‌نام
                    </a>
                </li>
            {% endif %}

            <!-- دکمه تغییر تم -->
            <li class="mt-4">
                <button class="toggle-theme flex items-center gap-x-2">
                    <svg class="inline-block dark:hidden w-5 h-5">
                        <use href="#moon"></use>
                    </svg>
                    <svg class="hidden dark:inline w-5 h-5">
                        <use href="#sun"></use>
                    </svg>
                    تغییر تم
                </button>
            </li>
        </ul>
    </div>
</header>

